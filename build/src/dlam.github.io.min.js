var Article=function(a,b){this.parentElement=a,this.articleTitle=b.title,this.articleContent=b.content,this.articleImg=b.image,this.articleDate=new Date(parseInt(b.date)),this.timeDifference=Math.floor(Date.now()-this.articleDate.valueOf()),this.seconds=Math.floor(this.timeDifference/1e3),this.minutes=Math.floor(this.seconds/60),this.hours=Math.floor(this.minutes/60),this.days=Math.floor(this.hours/24)};Article.prototype.render=function(){var a;a=this.days>=7?this.articleDate.getMonth()+"/"+this.articleDate.getDate()+"/"+this.articleDate.getFullYear():0!==this.days?this.days+" days ago":0!==this.hours?this.hours+" hours ago":0!==this.minutes?this.minutes+" minutes ago":0!==this.seconds?this.seconds+" seconds ago":"Just now";var b=document.createElement("div");b.className="article";var c=document.createElement("img");c.src=this.articleImg;var d=document.createElement("div");d.className="contentContainer";var e=document.createElement("div");e.className="title",e.textContent=this.articleTitle;var f=document.createElement("div");f.className="date",f.textContent=a;var g=document.createElement("div");g.className="content",g.textContent=this.articleContent,d.appendChild(e),d.appendChild(f),d.appendChild(g),b.appendChild(c),b.appendChild(d),this.parentElement.appendChild(b)};var NavBar=function(a,b){this.parentElement=a,this.siteNavigator=b};NavBar.prototype.render=function(){for(var a=document.createElement("ul"),b=0;b<this.siteNavigator.navPages.length;b++)new NavLink(this.siteNavigator,a,this.siteNavigator.navPages[b]).render();this.parentElement.appendChild(a)};var NavLink=function(a,b,c){this.siteNavigator=a,this.parentElement=b,this.page=c};NavLink.prototype.render=function(){var a=document.createElement("li");a.className="navButton";var b=document.createElement("i");b.className="icon "+this.page.icon;var c=document.createElement("span");c.className="label",c.textContent=this.page.label,a.appendChild(b),a.appendChild(c),this.parentElement.appendChild(a);var d=this;a.onmousedown=function(){d.siteNavigator.navigateTo(d.page)}};var Page=function(a,b,c,d){this.label=a,this.icon=b,this.path=c,this.loadHandler=d},SiteNavigator=function(a,b){this.win=a,this.mainContainer=b,this.navPages=[],this.navPages[0]=new Page("MENU","icon_menu","/",function(a){a.innerHTML=""}),this.navPages[1]=new Page("HOME","icon_home","/",function(a){a.innerHTML=""}),this.navPages[2]=new Page("ABOUT","icon_account","?page=about",function(a){a.innerHTML=""}),this.navPages[3]=new Page("BLOG","icon_pen","?page=blog",function(a){a.innerHTML="";var b=new XMLHttpRequest,c="res/docs/blog/content.json";b.onreadystatechange=function(){if(4===b.readyState&&200===b.status)for(var c=JSON.parse(b.responseText),d=0;d<c.length;d++){var e=new Article(a,c[d]);e.render()}},b.open("GET",c,!0),b.send()}),this.navPages[4]=new Page("PROJECTS","icon_code-tags","?page=projects",function(a){a.innerHTML="";var b=new XMLHttpRequest,c="res/docs/blog/content.json";b.onreadystatechange=function(){if(4===b.readyState&&200===b.status)for(var c=JSON.parse(b.responseText),d=0;d<c.length;d++){var e=new Article(a,c[d]);e.render()}},b.open("GET",c,!0),b.send()})};SiteNavigator.prototype.navigateTo=function(a){this.win.history.pushState(null,"Dustin Lam - "+a.label,a.path),a.loadHandler(this.mainContainer)},SiteNavigator.prototype.onLoad=function(){},window.onload=function(){var a=document.querySelector(".navBar"),b=document.querySelector(".mainContainer"),c=new SiteNavigator(window,b);new NavBar(a,c).render(),c.onLoad()};